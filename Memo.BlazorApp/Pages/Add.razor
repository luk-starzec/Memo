@page "/add"

@inject IMemosRepo memosRepo
@inject ITokenManager tokenManager;
@inject NavigationManager navigationManager

<div class="add-page__wrapper">

    <Logo class="add-page__logo" />

    <MemoAdd class="add-page__form" OnAdd="@AddMemo" />

    <img class="add-page__background-image" src="/assets/add-image.svg" />

</div>

@code {

    async Task AddMemo(MemoNewModel memo)
    {
        if (await memosRepo.CreateMemo(memo))
        {
            var token = tokenManager.CreateToken(memo.Pin);
            navigationManager.NavigateTo($"/view/{memo.Url}/{token}");
        }
        // TODO error handling
    }

}
